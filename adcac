local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")

-- AvioScript Configuration
local AvioConfig = {
  ScriptName = "AvioScript",
  MinPetValue = 5000000,      -- Minimum pet value to snipe
  MaxPrice = 50000000,        -- Maximum price to consider
  AutoSnipeEnabled = false,   -- Auto-snipe toggle
  DiscordWebhook = "",        -- Discord webhook URL
  SniperInterval = 5,         -- Seconds between snipe attempts
  LoggingEnabled = true       -- Enable/disable detailed logging
}

-- Advanced Logging Function
local function AvioLog(message)
  if AvioConfig.LoggingEnabled then
    print("[" .. AvioConfig.ScriptName .. "] " .. message)
  end
end

-- Discord Webhook Notification
local function SendDiscordNotification(message)
  if AvioConfig.DiscordWebhook ~= "" then
    local data = {
      ["content"] = "**" .. AvioConfig.ScriptName .. " Notification:**\n" .. message
    }
    
    local success, response = pcall(function()
      HttpService:PostAsync(
        AvioConfig.DiscordWebhook, 
        HttpService:JSONEncode(data), 
        Enum.HttpContentType.ApplicationJson
      )
    end)
    
    if not success then
      AvioLog("Failed to send Discord notification: " .. tostring(response))
    end
  end
end

-- Advanced Booth Sniping Function
local function SnipeBooth()
  local localPlayer = Players.LocalPlayer
  
  for _, player in ipairs(Players:GetPlayers()) do
    if player ~= localPlayer then
      local success, boothData = pcall(function()
        local booth = player:FindFirstChild("booth")
        return booth
      end)
      
      if success and boothData then
        for _, item in ipairs(boothData.Items:GetChildren()) do
          local petValue = item:GetAttribute("Value") or 0
          local petPrice = item:GetAttribute("Price") or math.huge
          
          if petValue >= AvioConfig.MinPetValue and petPrice <= AvioConfig.MaxPrice then
            local buyAttempt = pcall(function()
              localPlayer.Character.HumanoidRootPart.CFrame = boothData.CFrame
              -- Add specific buying logic here based on game mechanics
            end)
            
            if buyAttempt then
              local logMessage = string.format(
                "Sniped Pet: Value = %d, Price = %d from %s", 
                petValue, 
                petPrice, 
                player.Name
              )
              
              AvioLog(logMessage)
              SendDiscordNotification(logMessage)
            end
          end
        end
      end
    end
  end
end

-- Main Sniper Loop
local function StartAvioSniper()
  while AvioConfig.AutoSnipeEnabled do
    SnipeBooth()
    wait(AvioConfig.SniperInterval)
  end
end

-- UI Setup (Optional - requires Kavo UI Library)
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib(AvioConfig.ScriptName .. " Booth Sniper", "DarkTheme")

local MainTab = Window:NewTab("Sniper Settings")
local MainSection = MainTab:NewSection("Booth Sniper Configuration")

MainSection:NewToggle("Auto Snipe", "Enable/Disable Automatic Booth Sniping", function(state)
  AvioConfig.AutoSnipeEnabled = state
  if state then
    spawn(StartAvioSniper)
  end
end)

MainSection:NewSlider("Min Pet Value", "Minimum value of pets to snipe", 0, 100000000, function(value)
  AvioConfig.MinPetValue = value
end)

MainSection:NewSlider("Max Price", "Maximum price to pay for a pet", 0, 100000000, function(value)
  AvioConfig.MaxPrice = value
end)

MainSection:NewTextBox("Discord Webhook", "Set Discord Webhook URL", function(url)
  AvioConfig.DiscordWebhook = url
end)

-- Start the script
AvioLog("AvioScript Booth Sniper Loaded Successfully!")
